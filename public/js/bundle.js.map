{"version":3,"sources":["mapbox.js","alert.js","login.js","updateSettings.js","stripe.js","signup.js","index.js"],"names":["displayMap","locations","mapboxgl","accessToken","map","Map","container","style","bounds","LngLatBounds","forEach","loc","ele","document","createElement","className","Marker","element","anchor","setLngLat","coordinates","addTo","Popup","offset","setHTML","day","description","extend","fitBounds","padding","top","bottom","left","right","hideAlert","querySelector","parentElement","removeChild","showAlert","type","mssg","markup","insertAdjacentHTML","window","setTimeout","login","email","password","axios","method","url","data","res","status","location","assign","response","message","logout","replace","console","log","updateSettings","Url","toUpperCase","reload","stripe","Stripe","bookTour","tourid","session","redirectToCheckout","sessionId","id","signUp","name","confirmPassword","mapBox","getElementById","loginForm","logoutUser","signupForm","updateformData","updateformPassoword","savePasswordbtn","bookbtn","JSON","parse","dataset","addEventListener","e","preventDefault","value","form","FormData","append","files","textContent","currentPassword","target","tourId"],"mappings":";;AMMA;;AACA;;AACA;ALRA,ACGA,AFHA,AKEA,AFFA;AFEO,AKOP,ANPO,ICAMkC,ADAAlC,SCAS,CDAC,ECAE,CDAC,QCAbkC,CDAAlC,QCAY,EDAC,CCAK,ADAJC,SAAD,EAAe;ACCvC,ADAAC,EAAAA,ICAMU,GAAG,CDAD,CAACT,CCAGU,QAAQ,CAACsB,CDArB,GACE,SCDU,CAAuB,QAAvB,CAAZ,yEDAA;AMOF,ANJE,MAAI/B,GAAG,GAAG,IAAIF,QAAQ,CAACG,GAAb,CAAiB;ACF3B,ADGEC,AIPJ,IJOIA,ECHEM,GAAJ,EAAS,EDGE,EAAE,KADc;ACDzBA,ADGAL,AIPJ,IHIIK,ADGAL,AIPE2D,GHIC,CAAC9B,CDGC,CIPG,CJOD,EIPI+B,MAAM,CACnB,CHGE,CAAkB9B,WAAlB,CAA8BzB,GAA9B,0BDCyB,CAGzB,iEIRiB,CAArB;AHKG,ACDI,AFKH,AKNG,AFFP,IDGaiC,AGDA6B,KHCK,CGDC;AJGlB,ACFiB,AFMd,AKPe,ADCZ,ADFA,CFDA,GGGMN,ADFAN,QCEQ,MDFM,mDDEN,AGDC,iBHCMhB,AGDC6B,IAAP,CHCD,CGDc7B,CHCAC,IGDb,EAAoBA,EHCrB,MGDC,EAA8B6B,eAA9B;AHCD,AGDC,ADCD,ADFM,qECEH,ADFM,iBCECP,ADFMlB,IAAP,ECEN,ADFmBZ,IAAb;AGS9B,AJPqB,AFCQ,AKFP,ADCE,ADFM,GHGlB,CAAV;AMOF,AJRqB,AFSnB,AKVoB,ADCE,ADFM,IGUxBsC,ENCErE,IMDI,ENCE,CMDCK,ENCE,IAAIX,EMDE,CAAC4E,KNCK,CAACrE,QMDf,CAAwB,GNCtB,EMDF,ANCb,CMDF;ALJO,AKKP,AJTqB,AFWnBR,AKZoB,ADCE,ADFM,EHa5BA,ECPWqC,AKKPyC,ONEK,CAACrE,CCPU,AKKP,GLLU,AKKPG,GNEhB,CAAkB,IMFM,CLLbyB,AKKcH,KNENxB,GAAD,CCPK,CAAC4B,ADOG,GMFX,CLLO,AKKgB,ELLTC,IAAP,EAAgB,AKKvB,CAAlB;ALJEN,AKKF,AJVqB,AFYjB,AKbkB,ADCE,ADFM,EFO5BA,EKKI8C,OLLK,GAD8B,AKMzB,CLJd,EKIiBnE,QAAQ,CAACsB,aAAT,CAAuB,SAAvB,CAAnB;AACA,AJXqB,AFajB,AKdkB,ADCE,ADFM,IGaxB8C,INEIrE,GAAG,GMFG,ANEAC,GMFGA,KNEK,CAACC,EMFE,CAACgE,UNEZ,CAAuB,GMFpB,CAAwB,CNE3B,CAAZ,OMFe,CAAnB;ALJE,AKKF,AJZqB,AFcjBlE,AKfkB,ADCE,ADFM,IGcxBsE,ANEFtE,ECPI6B,CDOD,CAAC1B,ICPM,KDOV,CMFgB,ENEA,CMFGF,ONEnB,CMF2B,ANDF,CMCGsB,ANI5B,aMJmB,CAAuB,SLLCI,IAAjC,MKKS,CAAvB,SLLwDC,IAA1C,WAAZ;AACA3B,AKKF,AJbqB,AGDC,ADCE,ADAdkD,EFQRlD,EKKIsE,MLLI,CAAChD,CERD4B,GAFoB,GAGxBxB,CDCgBS,AGDAA,GFAZ,CGYe,CLLvB,ACNyB,AGDA,CJOF,ACNG,AGDA,CCYAnC,CHZb,IFOb,EAA+B6B,CKKG,CAACP,EHZ/B,GACI,QGWkB,CAAuB,ELLjD,CAAkD,YAAlD,EAAgEM,MAAhE,AKK0B,AHZtB,CGYN,EHVU,wBALoB;AFW5BE,AKKF,AJXMM,AFcF,AKfEA,ADFkB,ADFM,EFW5BN,EKKIyC,ILLE,ADQAlF,CCRC0C,KCNHK,AGDAA,ELeU,CAACjC,ECRf,AKKmB,AFXKgC,CHMNd,ACNR,AGDA,ECYYrB,AJXV,AGDA,CLeV,CAAoB,AIdO,IFDH,AGDA,CJQ1B,CKK8B,CLLD,AKKEiE,ILL/B,UKKsB,CAAwB,eAAxB,CAAxB,OFXqET,MAAtC,EAHP;AHUvB,AKKD,AJXMnB,AFcAjC,AKfAiC,AFLwB,CFMvB,GKWDmC,ENGApE,KMHO,ENGA,CMHGJ,AJXVqC,AGDAA,CLeStC,EEdN,AGDA,CLce,CEbb,AGDA,AFEWoC,GGUE,CAAC8B,CHVE,CAAC,YGUZ,CAAwB,EJbZ,CGDA,QCcZ,CAAhB,EACA;AJXM3B,AFcAjC,AKfAiC,ADJkB,ADMlBF,MHaA/B,MAAM,EEdNiC,AFcQ,AKfRA,AFEAF,IDDI,AGDA,EHCE,AGDA,AFEA,EAAE,OADc;AGY5B,AJXQH,AFWgB,AKZhB6B,ADFEL,ADIJpB,IGUF2B,CNAA,EAIG1D,GMJP,EAAY,AFdFmD,EDIJpB,EDDEJ,AFWJ,AKZI6B,CLgBShE,AGdR,ECPe,ADOboD,CHcS,AKhBR,CHCC,AFeQ3C,CKhBbuD,AFAoB,CDCpB7B,GGFI,EHCA,IFYR,EAKGzB,KALH,CAKSjB,GALT,EANyB,CAazB;AMNF,AJXM2C,AGDAD,ADNgB,ADQlBK,cAAAA,EDDEJ,AGDAD,EFEE,EAAJK,CEFO,EAALL,CHCQ,EAARC,EGHI;ACeV,AJdU,AFoBR,AKlBIA,ADPgB,ADKI,MGcpB9C,ENMAC,KGpBmB,CAPG,CGqBb,CNMD,AKlBR6C,CLkBSzB,CMNGgE,CFbVpB,GEac,ANMpB,CMNqBqB,ANMF,CKlBP,CDDA,CCCRxC,ADDSwB,EEaG,CAAWM,KDfnB,CCeyB,CAACW,OAAP,CAAevF,AFbpC,CAA0B,QEahB,CAAlB;AACA,AJlB0B,AFwBtBsB,AKlBEqD,ADDFJ,MJmBAjD,MAAM,CExBe,CAFN,AF0BP,AInBRiD,ECCEI,ODDO,EAAEN,CEaJrE,KDZU,CDDC,CCChB2E,ADDiBzB,EEavB,EFbe,CAAamB,OAAb,CAAqBG;AEcrC,ANIsB,AKrBX,ADEwB,ADRN,EGyB9B,GNEI,EAGGtD,MItBG,CANc,EJyBpB,CAGaR,GAAG,CAACS,WAHjB,EAIGI,OAJH,kBAIqBb,GAAG,CAACc,GAJzB,eAIiCd,GAAG,CAACe,WAJrC,WAKGL,KALH,CAKSjB,GALT,EAdyB,CAqBzB;AEhCiB,AGCO,AFIlBgD,YAAAA,CEJiB,CAFL,CFDQ;ADIpBA,AF+BN5C,AIjCoB,IJiCpBA,MAAM,CAACmB,CE/BDyB,GAFW,EFiCjB,CAAczC,GAAG,CAACS,WAAlB;AMTJ,ANUG,AKnCmB,ADCE,ADWpB,GHAF,CMaE2D,SAAJ,EAAe,CHbP3B,GAAG,CAACD,IAAJ,CAASE,MAAT,KAAoB,SAAxB,EAAmC;AGcrC0B,AJdE,AFyBF3E,AKnCQgD,ADDc,ADYlB,EGaJ2B,ANWA3E,GAAG,CAACwB,KMXK,CAAC6D,ADxBFrC,GLmCR,AKrCoB,CHYdA,AFyBQ5C,GEzBL,CAAC2C,EFyBV,EEzBM,AFyBgB,CEzBPE,GIcf,CAA2B,EJdrB,KAAoB,ACCZ,CGad,EAAqC,MJdnC,ACCE,EDDiC,EIcCqC,CAAD,EAAO,KHbhBnD,IAAI,CAACyB,WAAL,EAAxB;AGcF0B,AJdE,AFyBF7D,AGxBEc,IGaF+C,ANWA7D,CMXC,CAAC8D,KNWK,EAAE,CGxBPhD,MGaF,AHbQ,CAACC,UAAP,CAAkB,IDDR,QCCc,CDDxB,EAAqB,wBAArB;AIeF,AJdED,AFyBAb,AK1BF,ADZoB,ADchBwB,MHwBFxB,EMXIgB,CNWD,EAAE,EMXI,CJdTH,AFwBO,EMVK9B,ADfVuC,AFEAE,GEFG,CHCC,AGDAH,CHCCP,GIca,ADflB,AFEQ,CGaWkC,ADfVzB,AFEAY,MDDX,AGDE,AFEA,CDDgB,ACCA,IEFI,AFEpB,GGaU,CAAwB,IJdZ,CGD1B,ECec,ADfqB,ECeY2B,KAA/C;AACA,AJdItC,AFyBFvB,AK1BA,ADbkB,ADejB,MHwBDA,EMXIgB,INWE,EAAE,CG1BR,CGeY,AJdVO,CFuBK,AGtBJ,EGaYzC,EHff,GDCU,CAAC0C,EIcY,CAACuB,GJdtB,CAAgB,GAAhB,CGDQ,MCeK,CAAwB,EDfvC,EAAqB,MCeN,EAAoCc,KAArD,iBDfE;ACiBF,AJfG,AFyBD5D,AK1BAW,ADdkB,ADgBnB,MHwBCX,IAAI,EAAE,EK1BNW,CHDA,AFwBO,EEtBJ,GGDG,CHDN,AGCOC,CCgBHE,KAAN,EAAaC,EDhBX,CAAkB,KCgBpB,ODhB0B;ACiB3B,AJfE,AFyBCd,AK1BEqB,GCUN,GNgBIrB,KAAK,EAAE,GK1BLqB,QAAQ,CAACC,MAAT,CAAgB,KAAhB;ACiBP,ANKY,AKrBN,ADhBiB,ADFM,EGoC9B,aDpBM,EAEG,IAFH;AHde,AFoCG,AKnBnB,ADjBmB,ADFM,GHsC5B;AEpCmB,AF4CpB,AI5CuB,CJHjB;AMsCP,ADpCsB,ADCE,ADFM,IGqC1B0B,UAAJ,EAAgB;AACdA,AJpCmB,AGDC,ADCE,ADFM,EGsC5BA,UAAU,CAACQ,gBAAX,CAA4B,QAA5B,EAAsC,UAACC,CAAD,EAAO;AAC3CA,AJrCiB,AEAG,ADFM,IGuC1BA,CAAC,CAACC,cAAF;AACA,AJtCiB,AGDC,AD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","file":"bundle.js","sourceRoot":"","sourcesContent":["/* eslint-disable */\r\n\r\nexport const displayMap = (locations) => {\r\n  mapboxgl.accessToken =\r\n    'pk.eyJ1IjoicHJpbmNlMTciLCJhIjoiY2txOTBoNHlxMDRtbTJ2bnl6YTVuMGhzbiJ9.OyRx4WyPRpiiw7XySALV5Q';\r\n\r\n  var map = new mapboxgl.Map({\r\n    container: 'map',\r\n    style: 'mapbox://styles/prince17/ckq99vd3702ai17k0pyzb0ww6',\r\n    //   scrollZoom: false,\r\n    //   center: [-80.185942, 25.774772],\r\n    //   zoom: 6,\r\n  });\r\n\r\n  const bounds = new mapboxgl.LngLatBounds();\r\n\r\n  locations.forEach((loc) => {\r\n    // Creating marker\r\n    const ele = document.createElement('div');\r\n    ele.className = 'marker';\r\n\r\n    // Add marker\r\n    new mapboxgl.Marker({\r\n      element: ele,\r\n      anchor: 'bottom',\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .addTo(map);\r\n\r\n    // Add Popup\r\n    new mapboxgl.Popup({\r\n      offset: 30,\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\r\n      .addTo(map);\r\n\r\n    // Extends map bounds to include current location\r\n    bounds.extend(loc.coordinates);\r\n  });\r\n\r\n  map.fitBounds(bounds, {\r\n    padding: {\r\n      top: 200,\r\n      bottom: 150,\r\n      left: 100,\r\n      right: 100,\r\n    },\r\n  });\r\n};\r\n","/*elslint-disable */\r\n\r\nexport const hideAlert = () => {\r\n  const ele = document.querySelector('.alert');\r\n  if (ele) {\r\n    ele.parentElement.removeChild(ele);\r\n  }\r\n};\r\n\r\nexport const showAlert = (type, mssg) => {\r\n  hideAlert();\r\n  // type is either 'success' or 'error'\r\n  const markup = `<div class = \"alert alert--${type}\">${mssg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n","/*eslint-disable */\r\n// import axios from 'axios';\r\n\r\nimport { showAlert } from './alert.js';\r\n\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Logged in successfully');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (error) {\r\n    showAlert('error', error.response.data.message);\r\n  }\r\n\r\n  // ALTERNATE METHOD\r\n  //   try {\r\n  //     const res = await fetch('http://localhost:3000/api/v1/users/login', {\r\n  //       method: 'POST',\r\n  //       headers: {\r\n  //         'Content-Type': 'application/json',\r\n  //       },\r\n  //       body: JSON.stringify({\r\n  //         email,\r\n  //         password,\r\n  //       }),\r\n  //     });\r\n  //     const mssg = await res.json();\r\n  //     console.log(mssg);\r\n  //   } catch (error) {\r\n  //     console.log(error);\r\n  //   }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: '/api/v1/users/logout',\r\n    });\r\n\r\n    if ((res.data.status = 'succuss')) window.location.replace('/');\r\n  } catch (error) {\r\n    console.log(error);\r\n    showAlert('error', 'Error while logging out ! Please try again');\r\n  }\r\n};\r\n","import { showAlert } from './alert.js';\r\n\r\n// type can either be  \"password\" or 'data'\r\nexport const updateSettings = async (data, type) => {\r\n  try {\r\n    const Url =\r\n      type === 'password'\r\n        ? '/api/v1/users/updatemypassword'\r\n        : '/api/v1/users/updateme';\r\n\r\n    const res = await axios({\r\n      method: 'PATCH',\r\n      url: Url,\r\n      data,\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', `${type.toUpperCase()} Successfully Changed !`);\r\n      window.setTimeout(() => {\r\n        location.reload(true);\r\n      }, 2000);\r\n    }\r\n  } catch (error) {\r\n    showAlert('error', error.response.data.message);\r\n  }\r\n};\r\n","/*elslint-disable*/\r\nconst stripe = Stripe(\r\n  'pk_test_51J7xAVSImjx41WueEAnS5miZsR24N9sxaayqfGhfKZVaomJGbIxdSwy0YQATUK018osf2Fb84sKkqDrv2YKZK3rs00u68VJ75i'\r\n);\r\n\r\nexport const bookTour = async (tourid) => {\r\n  try {\r\n    // 1. Get the checkout session from API\r\n    const session = await axios(`/api/v1/bookings/checkout-session/${tourid}`);\r\n\r\n    // 2. Create checkout form + charge credit card\r\n    await stripe.redirectToCheckout({\r\n      sessionId: session.data.session.id,\r\n    });\r\n  } catch (error) {}\r\n};\r\n","/*eslint-disabel */\r\n\r\nimport { showAlert } from './alert.js';\r\n\r\nexport const signUp = async (name, email, password, confirmPassword) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/signup',\r\n      data: {\r\n        name,\r\n        email,\r\n        password,\r\n        confirmPassword,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Account Created Successfully');\r\n      window.setTimeout(() => {\r\n        location.assign('/me');\r\n      }, 1500);\r\n    }\r\n  } catch (error) {\r\n    showAlert('error', error.response.data.message);\r\n  }\r\n};\r\n","/*eslint-disable */\r\n\r\n// import { present } from './babel.config'; // this is to run some js feature on the older browser\r\n\r\n// const displayMap = require('./mapbox');\r\n// const login = require('./login');\r\nimport { displayMap } from './mapbox.js';\r\nimport { login, logout } from './login.js';\r\nimport { updateSettings } from './updateSettings.js';\r\nimport { bookTour } from './stripe.js';\r\nimport { signUp } from './signup.js';\r\n\r\n// DOM Elements\r\nconst mapBox = document.getElementById('map');\r\nconst loginForm = document.querySelector('#login');\r\nconst logoutUser = document.querySelector('#logout');\r\nconst signupForm = document.getElementById('sign-up');\r\nconst updateformData = document.querySelector('#update-form-data');\r\nconst updateformPassoword = document.querySelector('#update-form-password');\r\nconst savePasswordbtn = document.getElementById('save-password');\r\nconst bookbtn = document.getElementById('book-tour');\r\n// DELEGATION\r\nif (mapBox) {\r\n  // Mapbox.js\r\n  const locations = JSON.parse(mapBox.dataset.locations);\r\n  displayMap(locations);\r\n}\r\n\r\n// login.js\r\nif (loginForm) {\r\n  loginForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n\r\n    login(email, password);\r\n  });\r\n}\r\n\r\n// signup.js\r\nif (signupForm) {\r\n  signupForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const name = document.getElementById('name').value;\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    const confirmPassword = document.getElementById('confirm-password').value;\r\n\r\n    console.log(name, email);\r\n\r\n    signUp(name, email, password, confirmPassword);\r\n  });\r\n}\r\n\r\n// logout user\r\nif (logoutUser) {\r\n  logoutUser.addEventListener('click', logout);\r\n}\r\n\r\nif (updateformData) {\r\n  updateformData.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const form = new FormData();\r\n    form.append('name', updateformData.querySelector('#name').value);\r\n    form.append('email', updateformData.querySelector('#email').value);\r\n    form.append('photo', updateformData.querySelector('#photo').files[0]);\r\n\r\n    updateSettings(form, 'data');\r\n  });\r\n}\r\n\r\nif (updateformPassoword) {\r\n  updateformPassoword.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    savePasswordbtn.textContent = 'Updating.....';\r\n    const currentPassword =\r\n      updateformPassoword.querySelector('#password-current').value;\r\n    const password = updateformPassoword.querySelector('#password').value;\r\n    const confirmPassword =\r\n      updateformPassoword.querySelector('#password-confirm').value;\r\n    await updateSettings(\r\n      { currentPassword, password, confirmPassword },\r\n      'password'\r\n    );\r\n    savePasswordbtn.textContent = 'Save Password';\r\n  });\r\n}\r\n\r\n// booking tour\r\nif (bookbtn) {\r\n  bookbtn.addEventListener('click', (e) => {\r\n    e.target.textContent = 'Processing....';\r\n    const { tourId } = e.target.dataset;\r\n    bookTour(tourId);\r\n  });\r\n}\r\n"]}